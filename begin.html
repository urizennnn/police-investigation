<!-- <!DOCTYPE html> -->
<!-- <html> -->
<!-- <head> -->
<!-- <meta charset="UTF-8"> -->
<!-- <title>/home/urizen/fufuapi/src/modules/UserOperation/controller.ts</title> -->
<!-- <meta name="colorscheme" content="tokyonight-night"></meta> -->
<!-- <style> -->
<!-- * {font-family: monospace} -->
<!-- body {background-color: #1a1b26; color: #c0caf5} -->
<!-- .-variable-parameter {color: #e0af68} -->
<!-- .Statement {color: #bb9af7} -->
<!-- .-punctuation-delimiter {color: #89ddff} -->
<!-- .Type {color: #2ac3de} -->
<!-- .-punctuation-bracket {color: #a9b1d6} -->
<!-- .Constant {color: #ff9e64} -->
<!-- .-type-builtin {color: #27a1b9} -->
<!-- .-punctuation-special {color: #89ddff} -->
<!-- .String {color: #9ece6a} -->
<!-- .-keyword {font-style: italic; color: #9d7cd8} -->
<!-- .Special {color: #2ac3de} -->
<!-- .-variable-member {color: #73daca} -->
<!-- .-operator {color: #89ddff} -->
<!-- .-spell {} -->
<!-- .PreProc {color: #7dcfff} -->
<!-- .Comment {color: #565f89} -->
<!-- .-none {} -->
<!-- .-variable {font-style: italic; color: #c0caf5} -->
<!-- .Function {font-style: italic; color: #7aa2f7} -->
<!-- .-variable-builtin {color: #f7768e} -->
<!-- .-constructor {color: #bb9af7} -->
<!-- </style> -->
<!-- </head> -->
<!-- <body style="display: flex"> -->
<!-- <pre> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">Request</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="Type">Response</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;express&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-variable">util</span> <span class="PreProc">from</span> <span class="String">&quot;util&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">StatusCodes</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;http-status-codes&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable">verifyOTP</span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;@modules/otp-service/controller&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="Type">UserTypes</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;@schemas/User/User&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable">decodeJwt</span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;@middlewares/jwt&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable">v2</span> <span class="PreProc">as</span> <span class="-variable">cloudinary</span><span class="-punctuation-delimiter">,</span> <span class="-variable">v2</span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;cloudinary&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">UploadedFile</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;express-fileupload&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-variable">mongoose</span> <span class="PreProc">from</span> <span class="String">&quot;mongoose&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">Readable</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;stream&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-variable">streamifier</span> <span class="PreProc">from</span> <span class="String">&quot;streamifier&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type">NotificationPreferenceModel</span></span> <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;@schemas/Notification/Notification&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-operator"><span class="Special">*</span></span> <span class="PreProc">as</span> <span class="-variable"><span class="Type"><span class="PreProc">Yup</span></span></span> <span class="PreProc">from</span> <span class="String">&quot;yup&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="-variable">updatedocuments</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">deleteDocuments</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">getUserByIdValidate</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">deleteUservalidate</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">usertypeValidate</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">referandlogout</span><span class="-punctuation-delimiter">,</span> -->
<!-- <span class="-punctuation-bracket">}</span> <span class="PreProc">from</span> <span class="String">&quot;@validation/UserValidation/index&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-variable"><span class="Type">ErrorHandler</span></span> <span class="PreProc">from</span> <span class="String">&quot;@errors/error&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!-- <span class="PreProc">import</span> <span class="-variable">admin</span> <span class="PreProc">from</span> <span class="String">&quot;@utils/config/fcmServer&quot;</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Type"><span class="Function">SignupOrLogin</span></span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">token</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">decodedToken</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable">admin</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">auth</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">verifyIdToken</span></span><span class="-punctuation-bracket">(</span><span class="-variable">token</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">decodedToken</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid token&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">email</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedToken</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">email</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User logged in&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">newUser</span> <span class="-operator">=</span> <span class="-operator">new</span> <span class="-variable"><span class="Type"><span class="-constructor">UserModel</span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable-member">email</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedToken</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">email</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable-member">full_name</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedToken</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">name</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable-member">profile_picture</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedToken</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">picture</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="-variable">newUser</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">INTERNAL_SERVER_ERROR</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span><span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">updateUser</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">details</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">details</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable">details</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">=</span> <span class="-variable">details</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">toLowerCase</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOneAndUpdate</span></span><span class="-punctuation-bracket">(</span> -->
<!--       <span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable">details</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">{</span> <span class="-variable-member">new</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">details</span><span class="-punctuation-delimiter">?.</span><span class="-variable-member">fcm_token</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable"><span class="Type">NotificationPreferenceModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOneAndUpdate</span></span><span class="-punctuation-bracket">(</span> -->
<!--         <span class="-punctuation-bracket">{</span> <span class="-variable-member">userId</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">_id</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--         <span class="-punctuation-bracket">{</span> <span class="-variable-member">fcmToken</span><span class="-punctuation-delimiter">:</span> <span class="-variable">details</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">fcm_token</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--         <span class="-punctuation-bracket">{</span> <span class="-variable-member">upsert</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">new</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User updated&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">updateUserDocuments</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">documents</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span> <span class="PreProc"><span class="-operator">as</span></span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">documents</span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="-type-builtin">string</span><span class="-punctuation-bracket">[</span><span class="-punctuation-bracket">]</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">updatedocuments</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">existingDocuments</span> <span class="-operator">=</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span> <span class="-operator">||</span> <span class="-punctuation-bracket">[</span><span class="-punctuation-bracket">]</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">existingDocuments</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">length</span> <span class="-operator">&gt;=</span> <span class="Constant">3</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User already has the maximum of 3 documents&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">availableSlots</span> <span class="-operator">=</span> <span class="Constant">3</span> <span class="-operator">-</span> <span class="-variable">existingDocuments</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">length</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">documentsToAdd</span> <span class="-operator">=</span> <span class="-variable">documents</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">slice</span></span><span class="-punctuation-bracket">(</span><span class="Constant">0</span><span class="-punctuation-delimiter">,</span> <span class="-variable">availableSlots</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="-operator">...</span><span class="-variable">documentsToAdd</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User updated&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">deleteDocument</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">name</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">deleteDocuments</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">includes</span></span><span class="-punctuation-bracket">(</span><span class="-variable">name</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable">v2</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">uploader</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">destroy</span></span><span class="-punctuation-bracket">(</span><span class="-variable">name</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span> <span class="-operator">=</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">filter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">doc</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="-type-builtin">any</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-variable">doc</span> <span class="-operator">!==</span> <span class="-variable">name</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> <span class="Statement">else</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Document not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Document deleted&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">getUserProfile</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User Profile&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">getUserById</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">id</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">getUserByIdValidate</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">_id</span><span class="-punctuation-delimiter">:</span> <span class="-variable">id</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Successfully got user&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Type"><span class="Function">UploadImage</span></span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="-keyword">const</span> <span class="-variable">image</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">files</span><span class="-punctuation-delimiter">?.</span><span class="-variable-member">image</span> <span class="PreProc"><span class="-operator">as</span></span> <span class="Type">UploadedFile</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--   <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">image</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Image is required&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!---->
<!--   <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">image</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">size</span> <span class="-operator">&gt;</span> <span class="Constant">5</span> <span class="-operator">*</span> <span class="Constant">1024</span> <span class="-operator">*</span> <span class="Constant">1024</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Image size exceeds the 5MB limit.&quot;</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!---->
<!--   <span class="-keyword">const</span> <span class="-variable">options</span> <span class="-operator">=</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable-member">use_filename</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-variable-member">unique_filename</span><span class="-punctuation-delimiter">:</span> <span class="Constant">false</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-variable-member">overwrite</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-variable-member">timeout</span><span class="-punctuation-delimiter">:</span> <span class="Constant">60000</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--   <span class="-keyword">const</span> <span class="-variable">decodedJwt</span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedJwt</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--   <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!--   <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">profile_picture</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">publicId</span> <span class="-operator">=</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">profile_picture</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">split</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;/&quot;</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">pop</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">?.</span><span class="-variable-member"><span class="Function">split</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;.&quot;</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">[</span><span class="Constant">0</span><span class="-punctuation-bracket">]</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">publicId</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable">v2</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">uploader</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">destroy</span></span><span class="-punctuation-bracket">(</span><span class="-variable">publicId</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!---->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Function">uploadStream</span></span> <span class="-operator">=</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">imageData</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Buffer</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-operator">new</span> <span class="-variable"><span class="Type"><span class="-type-builtin"><span class="-constructor">Promise</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">resolve</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">reject</span></span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--         <span class="-keyword">const</span> <span class="-variable">cloudinaryStream</span> <span class="-operator">=</span> <span class="-variable">v2</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">uploader</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">upload_stream</span></span><span class="-punctuation-bracket">(</span> -->
<!--           <span class="-variable">options</span><span class="-punctuation-delimiter">,</span> -->
<!--           <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">error</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">result</span></span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--             <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--               <span class="-variable"><span class="Function">reject</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--             <span class="-punctuation-bracket">}</span> <span class="Statement">else</span> <span class="-punctuation-bracket">{</span> -->
<!--               <span class="-variable"><span class="Function">resolve</span></span><span class="-punctuation-bracket">(</span><span class="-variable">result</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--             <span class="-punctuation-bracket">}</span> -->
<!--           <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--         <span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--         <span class="-variable">streamifier</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">createReadStream</span></span><span class="-punctuation-bracket">(</span><span class="-variable">imageData</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">pipe</span></span><span class="-punctuation-bracket">(</span><span class="-variable">cloudinaryStream</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">result</span> <span class="-operator">=</span> <span class="-punctuation-bracket">(</span><span class="-keyword">await</span> <span class="-variable"><span class="Function">uploadStream</span></span><span class="-punctuation-bracket">(</span><span class="-variable">image</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">data</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span> <span class="PreProc"><span class="-operator">as</span></span> <span class="-type-builtin">any</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">profile_picture</span> <span class="-operator">=</span> <span class="-variable">result</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">secure_url</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">CREATED</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Profile image uploaded successfully&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">data</span><span class="-punctuation-delimiter">:</span> <span class="-variable">user</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Upload Image Error:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">deleteUser</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">otp</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">deleteUservalidate</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">response</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Function">verifyOTP</span></span><span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">,</span> <span class="-variable">otp</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">response</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">valid</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">UNAUTHORIZED</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid OTP&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">deleteOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User deleted successfully&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Type"><span class="Function">UploadMultiple</span></span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">decodedJwt</span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">let</span> <span class="-variable">images</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">files</span><span class="-punctuation-delimiter">?.</span><span class="-variable-member">image</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">images</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--         <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Image is required&quot;</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable"><span class="Type"><span class="-type-builtin">Array</span></span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">isArray</span></span><span class="-punctuation-bracket">(</span><span class="-variable">images</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable">images</span> <span class="-operator">=</span> <span class="-punctuation-bracket">[</span><span class="-variable">images</span><span class="-punctuation-bracket">]</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">log</span></span><span class="-punctuation-bracket">(</span><span class="-variable">util</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">inspect</span></span><span class="-punctuation-bracket">(</span><span class="-variable">images</span><span class="-punctuation-delimiter">,</span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">depth</span><span class="-punctuation-delimiter">:</span> <span class="Special">null</span><span class="-punctuation-delimiter">,</span> <span class="-variable-member">colors</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">images</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">length</span> <span class="-operator">&gt;</span> <span class="Constant">3</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--         <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;No more than 3 images are allowed.&quot;</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">options</span> <span class="-operator">=</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable-member">use_filename</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable-member">unique_filename</span><span class="-punctuation-delimiter">:</span> <span class="Constant">false</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable-member">overwrite</span><span class="-punctuation-delimiter">:</span> <span class="Constant">true</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-variable-member">timeout</span><span class="-punctuation-delimiter">:</span> <span class="Constant">60000</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">for</span> <span class="-punctuation-bracket">(</span><span class="-keyword">const</span> <span class="-variable">image</span> <span class="Statement">of</span> <span class="-variable">images</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">image</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">size</span> <span class="-operator">&gt;</span> <span class="Constant">5</span> <span class="-operator">*</span> <span class="Constant">1024</span> <span class="-operator">*</span> <span class="Constant">1024</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--         <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--           <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">`Image <span class="-none"><span class="-none"><span class="-punctuation-special">${</span><span class="-variable">image</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">name</span><span class="-punctuation-bracket"><span class="-punctuation-special">}</span></span></span></span> size exceeds the 5MB limit.`</span><span class="-punctuation-delimiter">,</span> -->
<!--         <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">uploadPromises</span> <span class="-operator">=</span> <span class="-variable">images</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">image</span></span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">const</span> <span class="-variable">bufferStream</span> <span class="-operator">=</span> <span class="-operator">new</span> <span class="-variable"><span class="Type"><span class="-constructor">Readable</span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-variable">bufferStream</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="-variable">image</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">data</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-variable">bufferStream</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="Special">null</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--       <span class="-keyword">return</span> <span class="-operator">new</span> <span class="-variable"><span class="Type"><span class="-type-builtin"><span class="-constructor">Promise</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">resolve</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">reject</span></span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--         <span class="-keyword">const</span> <span class="-variable">uploadStream</span> <span class="-operator">=</span> <span class="-variable">cloudinary</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">uploader</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">upload_stream</span></span><span class="-punctuation-bracket">(</span> -->
<!--           <span class="-variable">options</span><span class="-punctuation-delimiter">,</span> -->
<!--           <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">error</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">result</span></span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--             <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--               <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Cloudinary Upload Error:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--               <span class="-keyword">return</span> <span class="-variable"><span class="Function">reject</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--             <span class="-punctuation-bracket">}</span> -->
<!--             <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--               <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--                 <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedJwt</span><span class="-punctuation-delimiter">,</span> -->
<!--               <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--               <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--                 <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">documents</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="-variable">result</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">secure_url</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--                 <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--               <span class="-punctuation-bracket">}</span> -->
<!--               <span class="-variable"><span class="Function">resolve</span></span><span class="-punctuation-bracket">(</span><span class="-variable">result</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--             <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">saveError</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--               <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;User Save Error:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">saveError</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--               <span class="-variable"><span class="Function">reject</span></span><span class="-punctuation-bracket">(</span><span class="-variable">saveError</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--             <span class="-punctuation-bracket">}</span> -->
<!--           <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--         <span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--         <span class="-variable">bufferStream</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">pipe</span></span><span class="-punctuation-bracket">(</span><span class="-variable">uploadStream</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">await</span> <span class="-variable"><span class="Type"><span class="-type-builtin">Promise</span></span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">all</span></span><span class="-punctuation-bracket">(</span><span class="-variable">uploadPromises</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;All images uploaded successfully.&quot;</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Upload Images Error:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="PreProc"><span class="-keyword">export</span></span> <span class="-keyword">const</span> <span class="-variable"><span class="Function">downgradeUser</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">user_type</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">user_type</span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">UserTypes</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">token</span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable">token</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">usertypeValidate</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BASIC</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User is already at BASIC level&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BASIC</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">=</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BASIC</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">is_pro</span> <span class="-operator">=</span> <span class="Constant">false</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User downgraded to BASIC successfully&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> <span class="Statement">else</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--         <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid downgrade type. Only downgrade to BASIC is allowed.&quot;</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Error downgrading user:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="PreProc"><span class="-keyword">export</span></span> <span class="-keyword">const</span> <span class="-variable"><span class="Function">upgradeUser</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">user_type</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">user_type</span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">UserTypes</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">token</span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable">token</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">await</span> <span class="-variable">usertypeValidate</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PRO</span> <span class="-operator">&amp;&amp;</span> <span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PRO</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User is already a PRO&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PLUS</span> <span class="-operator">&amp;&amp;</span> <span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PLUS</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User is already a PLUS&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PLUS</span> <span class="-operator">&amp;&amp;</span> <span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PRO</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Downgrade from PLUS to PRO is not allowed&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PRO</span> <span class="-operator">||</span> <span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PLUS</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">user_type</span> <span class="-operator">=</span> <span class="-variable">user_type</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">is_pro</span> <span class="-operator">=</span> <span class="-variable">user_type</span> <span class="-operator">===</span> <span class="-variable"><span class="Type">UserTypes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">PRO</span><span class="-punctuation-delimiter">;</span> -->
<!--       <span class="-keyword">await</span> <span class="-variable">user</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--         <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">`User upgraded to <span class="-none"><span class="-none"><span class="-punctuation-special">${</span><span class="-variable">user_type</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">toUpperCase</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket"><span class="-punctuation-special">}</span></span></span></span> successfully`</span><span class="-punctuation-delimiter">,</span> -->
<!--       <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> <span class="Statement">else</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid upgrade type&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Error upgrading user:&quot;</span><span class="-punctuation-delimiter">,</span> <span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable"><span class="Type">ErrorHandler</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">handleError</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-delimiter">,</span> <span class="-variable">res</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">referUser</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">code</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">decodedJwt</span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">referandlogout</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">currentUser</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable">decodedJwt</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">currentUser</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">NOT_FOUND</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User not found&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">isSelfReferral</span> <span class="-operator">=</span> <span class="-variable">currentUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">_id</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">toString</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">slice</span></span><span class="-punctuation-bracket">(</span><span class="-operator"><span class="-operator">-</span></span><span class="Constant">8</span><span class="-punctuation-bracket">)</span> <span class="-operator">===</span> <span class="-variable">code</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">isSelfReferral</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;You can't refer yourself&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-keyword">const</span> <span class="-variable">referredUser</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> -->
<!--       <span class="-variable-member">_id</span><span class="-punctuation-delimiter">:</span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">$regex</span><span class="-punctuation-delimiter">:</span> <span class="-operator">new</span> <span class="-variable"><span class="Type"><span class="-type-builtin"><span class="-constructor">RegExp</span></span></span></span><span class="-punctuation-bracket">(</span><span class="String">`.{16}<span class="-none"><span class="-none"><span class="-punctuation-special">${</span><span class="-variable">code</span><span class="-punctuation-bracket"><span class="-punctuation-special">}</span></span></span></span>`</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">referredUser</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid referral code&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="-variable">referredUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">referred_users</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span> -->
<!--       <span class="-variable">currentUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">_id</span> <span class="PreProc"><span class="-operator">as</span></span> <span class="-variable">mongoose</span><span class="-punctuation-delimiter">.</span><span class="Type">Types</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">ObjectId</span><span class="-punctuation-delimiter">,</span> -->
<!--     <span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-variable">currentUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">referred_by</span> <span class="-operator">=</span> <span class="-variable">referredUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">_id</span> <span class="PreProc"><span class="-operator">as</span></span> <span class="-variable">mongoose</span><span class="-punctuation-delimiter">.</span><span class="Type">Types</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">ObjectId</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable"><span class="Type"><span class="-type-builtin">Promise</span></span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">all</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">[</span><span class="-variable">referredUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">,</span> <span class="-variable">currentUser</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">save</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">]</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;User referred&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span> <span class="-operator">instanceof</span> <span class="-variable"><span class="Type">Yup</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">ValidationError</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="-variable">error</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">errors</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">join</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;, &quot;</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">INTERNAL_SERVER_ERROR</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Internal server error&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="-keyword">const</span> <span class="-variable"><span class="Function">logout</span></span> <span class="-operator">=</span> <span class="-keyword">async</span> <span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">req</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Request</span><span class="-punctuation-delimiter">,</span> <span class="-variable"><span class="-variable-parameter">res</span></span><span class="-punctuation-delimiter"><span class="-punctuation-delimiter">:</span></span> <span class="Type">Response</span><span class="-punctuation-bracket">)</span> <span class="-operator">=&gt;</span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="Statement">try</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-operator">=</span> <span class="-variable"><span class="Function">decodeJwt</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable">code</span> <span class="-punctuation-bracket">}</span> <span class="-operator">=</span> <span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">await</span> <span class="-variable">referandlogout</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">validate</span></span><span class="-punctuation-bracket">(</span><span class="-variable">req</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">body</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">log</span></span><span class="-punctuation-bracket">(</span><span class="String">`<span class="-none"><span class="-none"><span class="-punctuation-special">${</span><span class="-variable">code</span><span class="-punctuation-bracket"><span class="-punctuation-special">}</span></span></span></span>,<span class="-none"><span class="-none"><span class="-punctuation-special">${</span><span class="-variable"><span class="Type">DecodedJwt</span></span><span class="-punctuation-bracket"><span class="-punctuation-special">}</span></span></span></span>`</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Comment"><span class="-spell">//@ts-ignore</span></span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">response</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Function">verifyOTP</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">DecodedJwt</span></span><span class="-punctuation-delimiter">,</span> <span class="-variable">code</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-keyword">const</span> <span class="-variable">user</span> <span class="-operator">=</span> <span class="-keyword">await</span> <span class="-variable"><span class="Type">UserModel</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">findOne</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">phone_number</span><span class="-punctuation-delimiter">:</span> <span class="-variable"><span class="Type">DecodedJwt</span></span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">code</span> <span class="-operator">!==</span> <span class="String">&quot;1234&quot;</span> <span class="-operator">||</span> <span class="-operator">!</span><span class="-variable">code</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid OTP&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!---->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-operator">!</span><span class="-variable">response</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">valid</span> <span class="-operator">&amp;&amp;</span> <span class="-operator">!</span><span class="-variable">user</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">UNAUTHORIZED</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Invalid OTP&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">OK</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Logout successful&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> <span class="Statement">catch</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--     <span class="-variable"><span class="-variable-builtin">console</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">error</span></span><span class="-punctuation-bracket">(</span><span class="-variable">error</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="Statement">if</span> <span class="-punctuation-bracket">(</span><span class="-variable">error</span> <span class="-operator">instanceof</span> <span class="-variable"><span class="Type">Yup</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">ValidationError</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span> -->
<!--       <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">BAD_REQUEST</span><span class="-punctuation-bracket">)</span> -->
<!--         <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="-variable">error</span><span class="-punctuation-delimiter">.</span><span class="-variable-member">errors</span><span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">join</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;, &quot;</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--     <span class="-punctuation-bracket">}</span> -->
<!--     <span class="-keyword">return</span> <span class="-variable">res</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">status</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">StatusCodes</span></span><span class="-punctuation-delimiter">.</span><span class="-variable-member">INTERNAL_SERVER_ERROR</span><span class="-punctuation-bracket">)</span> -->
<!--       <span class="-punctuation-delimiter">.</span><span class="-variable-member"><span class="Function">json</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">{</span> <span class="-variable-member">message</span><span class="-punctuation-delimiter">:</span> <span class="String">&quot;Internal server error&quot;</span> <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="-punctuation-delimiter">;</span> -->
<!--   <span class="-punctuation-bracket">}</span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- <span class="PreProc"><span class="-keyword">export</span></span> <span class="-punctuation-bracket">{</span> -->
<!--   <span class="-variable"><span class="Type">SignupOrLogin</span></span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable"><span class="Type">UploadImage</span></span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">getUserProfile</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">deleteUser</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">getUserById</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable"><span class="Type">UploadMultiple</span></span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">logout</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">referUser</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">updateUser</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">updateUserDocuments</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="-variable">deleteDocument</span><span class="-punctuation-delimiter">,</span> -->
<!--   <span class="Comment"><span class="-spell">// removeContacts,</span></span> -->
<!--   <span class="Comment"><span class="-spell">// updateContact,</span></span> -->
<!-- <span class="-punctuation-bracket">}</span><span class="-punctuation-delimiter">;</span> -->
<!---->
<!-- </pre> -->
<!-- </body> -->
<!-- </html> -->
